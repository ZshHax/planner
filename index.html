<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#F8F8F8">
    <title>Planner</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Italiana&family=Manrope:wght@300;500;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- VARIABLES --- */
        :root { 
            --bg: #F8F8F8; 
            --ink: #111111; 
            --line: #D1D1D1; 
            --accent: #555555; 
        }

        /* --- LAYOUT --- */
        body { 
            margin: 0; 
            background: #e0e0e0; 
            color: var(--ink); 
            font-family: 'Manrope', sans-serif; 
            display: flex; 
            justify-content: center; 
            min-height: 100vh; 
        }
        
        .mobile-wrapper { 
            width: 100%; 
            max-width: 430px; 
            background: var(--bg); 
            min-height: 100vh; 
            position: relative; 
            box-shadow: 0 0 50px rgba(0,0,0,0.1); 
            overflow-x: hidden; 
            padding-bottom: 120px; 
        }

        /* --- YEAR BADGE (NEW) --- */
        .year-mark {
            position: absolute;
            top: 15px;
            left: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: #ccc;
            z-index: 10;
        }
        
        /* --- FONTS --- */
        .fashion-font { font-family: 'Italiana', serif; }
        .mono-font { 
            font-family: 'JetBrains Mono', monospace; 
            font-size: 10px; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            color: var(--accent); 
        }

        /* --- HEADER SECTION --- */
        .header { 
            padding: 40px 24px 20px; 
            text-align: center; 
        }
        .date-display { 
            font-family: 'Italiana', serif; 
            font-size: 56px; 
            line-height: 1; 
            margin-bottom: 5px; 
            letter-spacing: -2px; 
        }
        .sub-header { 
            display: flex; 
            justify-content: space-between; 
            border-top: 1px solid var(--line); 
            border-bottom: 1px solid var(--line); 
            padding: 12px 0; 
            margin-top: 20px; 
        }
        .nav-btn { 
            background: none; 
            border: none; 
            font-size: 20px; 
            cursor: pointer; 
            color: var(--ink); 
            opacity: 0.6; 
        }

        /* --- INPUTS --- */
        .input-block { padding: 30px 24px; }
        .minimal-input { 
            width: 100%; 
            background: transparent; 
            border: none; 
            border-bottom: 1px solid var(--line); 
            font-family: 'Manrope', sans-serif; 
            font-size: 16px; 
            padding: 10px 0; 
            color: var(--ink); 
            outline: none; 
            transition: 0.3s; 
        }
        .minimal-input:focus { border-bottom-color: var(--ink); }
        .minimal-input::placeholder { color: #ccc; font-weight: 300; }
        
        /* --- TAGS SCROLL --- */
        .tags-scroll { 
            display: flex; 
            gap: 8px; 
            margin-top: 20px; 
            overflow-x: auto; 
            padding-bottom: 5px; 
            scrollbar-width: none; 
        }
        .tags-scroll::-webkit-scrollbar { display: none; }
        
        .tag-pill { 
            font-family: 'Manrope', sans-serif; 
            font-size: 11px; 
            font-weight: 500; 
            padding: 8px 16px; 
            border: 1px solid var(--line); 
            border-radius: 50px; 
            color: var(--accent); 
            cursor: pointer; 
            white-space: nowrap; 
            transition: 0.2s; 
        }
        input[type="radio"]:checked + .tag-pill { 
            background: var(--ink); 
            color: #fff; 
            border-color: var(--ink); 
        }
        input[type="radio"] { display: none; }
        
        .add-circle-btn { 
            display: block; 
            width: 100%; 
            margin-top: 20px; 
            padding: 15px; 
            background: transparent; 
            border: 1px solid var(--ink); 
            font-family: 'Manrope', sans-serif; 
            font-size: 11px; 
            text-transform: uppercase; 
            letter-spacing: 2px; 
            cursor: pointer; 
            transition: 0.2s; 
        }
        .add-circle-btn:active { background: var(--ink); color: #fff; }

        /* --- TASK LISTS --- */
        .category-block { padding: 0 24px; margin-bottom: 30px; }
        .cat-title { 
            font-family: 'Italiana', serif; 
            font-size: 18px; 
            margin-bottom: 15px; 
            color: var(--ink); 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        .cat-title::after { 
            content: ''; 
            flex: 1; 
            height: 1px; 
            background: var(--line); 
            opacity: 0.5; 
        }
        
        .task-row { 
            display: flex; 
            align-items: flex-start; 
            margin-bottom: 12px; 
            font-size: 14px; 
            font-weight: 300; 
            line-height: 1.5; 
            padding-left: 5px; 
        }
        .dot { 
            width: 6px; 
            height: 6px; 
            background: var(--line); 
            border-radius: 50%; 
            margin-top: 8px; 
            margin-right: 15px; 
            flex-shrink: 0; 
            transition: 0.3s; 
        }
        .task-row.done { color: #aaa; text-decoration: line-through; }
        .task-row.done .dot { background: var(--ink); }
        .del-x { 
            margin-left: auto; 
            color: #ddd; 
            border: none; 
            background: none; 
            cursor: pointer; 
            font-size: 16px; 
        }

        /* --- BALANCE SECTION --- */
        .chart-wrapper { padding: 20px 40px; }
        .slider-clean { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px 24px; 
            border-bottom: 1px solid #f0f0f0; 
        }
        input[type=range] { 
            -webkit-appearance: none; 
            width: 100px; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb { 
            -webkit-appearance: none; 
            height: 10px; 
            width: 10px; 
            background: var(--ink); 
            border-radius: 50%; 
            cursor: pointer; 
            margin-top: -4px; 
        }
        input[type=range]::-webkit-slider-runnable-track { 
            width: 100%; 
            height: 1px; 
            background: #ddd; 
        }

        /* --- FOOTER --- */
        .footer-brand { 
            margin-top: 40px; 
            text-align: center; 
            padding: 30px 20px; 
            border-top: 1px solid #eee; 
        }
        .brand-link { 
            font-family: 'Italiana', serif; 
            font-size: 14px; 
            color: var(--ink); 
            text-decoration: none; 
            letter-spacing: 1px; 
            display: block; 
            opacity: 0.8; 
        }
        
        /* --- NAVIGATION --- */
        .floating-nav { 
            position: fixed; 
            bottom: 30px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: rgba(255,255,255,0.9); 
            backdrop-filter: blur(10px); 
            padding: 8px; 
            border-radius: 40px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.08); 
            display: flex; 
            gap: 5px; 
            border: 1px solid #fff; 
            z-index: 999; 
        }
        .nav-pill { 
            border: none; 
            background: none; 
            padding: 10px 20px; 
            border-radius: 30px; 
            font-family: 'Manrope', sans-serif; 
            font-size: 12px; 
            font-weight: 600; 
            color: #999; 
            cursor: pointer; 
            transition: 0.3s; 
        }
        .nav-pill.active { background: var(--ink); color: #fff; }

        /* --- ANIMATIONS --- */
        .section { display: none; animation: fade 0.6s ease; }
        .section.active { display: block; }
        @keyframes fade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="mobile-wrapper">
    
    <div class="year-mark">(2025)</div>

    <div id="v-planner" class="section active">
        <div class="header">
            <div class="date-display" id="dateMain">23 OCT</div>
            <div class="sub-header mono-font">
                <button class="nav-btn" onclick="shift(-1)">←</button>
                <span id="dayMain">MONDAY</span>
                <button class="nav-btn" onclick="shift(1)">→</button>
            </div>
        </div>

        <div class="input-block">
            <input type="text" id="inTask" class="minimal-input" placeholder="Add a new task...">
            <div class="tags-scroll">
                <input type="radio" name="cat" id="t1" value="q1" checked> <label for="t1" class="tag-pill">Priority</label>
                <input type="radio" name="cat" id="t2" value="q2"> <label for="t2" class="tag-pill">Strategy</label>
                <input type="radio" name="cat" id="t3" value="q3"> <label for="t3" class="tag-pill">Delegate</label>
                <input type="radio" name="cat" id="t4" value="q4"> <label for="t4" class="tag-pill">Later</label>
            </div>
            <button class="add-circle-btn" onclick="add()">Append to list</button>
        </div>

        <div id="lists-container">
            <div class="category-block" id="block-q1">
                <div class="cat-title">Priority</div>
                <div id="list-q1"></div>
            </div>
            <div class="category-block" id="block-q2">
                <div class="cat-title">Strategy</div>
                <div id="list-q2"></div>
            </div>
            <div class="category-block" id="block-q3">
                <div class="cat-title">Delegate</div>
                <div id="list-q3"></div>
            </div>
            <div class="category-block" id="block-q4">
                <div class="cat-title">Later</div>
                <div id="list-q4"></div>
            </div>
        </div>
    </div>

    <div id="v-balance" class="section">
        <div class="header">
            <div class="date-display">Balance</div>
            <div class="sub-header mono-font">
                <span>Life Architecture</span>
                <span>V. 3.0</span> </div>
        </div>
        <div class="chart-wrapper"><canvas id="radarC"></canvas></div>
        <div id="sliders"></div>
        <div class="input-block"><button class="add-circle-btn" onclick="saveSnap()">Save Snapshot</button></div>
        <div id="hist" style="padding: 24px; color: #999;" class="mono-font"></div>
    </div>

    <div class="footer-brand">
        <a href="https://t.me/ZshHax" class="brand-link">Designed by ZshHax</a>
    </div>

    <div class="floating-nav">
        <button class="nav-pill active" onclick="nav('v-planner', this)">Planner</button>
        <button class="nav-pill" onclick="nav('v-balance', this)">Balance</button>
    </div>

</div>

<script>
    // --- VARIABLES & STATE ---
    let d = new Date(); 
    let tasks = JSON.parse(localStorage.getItem('zsh_tasks')) || []; 
    let hist = JSON.parse(localStorage.getItem('zsh_hist')) || [];
    const cats = ['Body','Mind','Work','Soul','Money','Love','Fun','Env'];
    let chart;

    // --- INITIALIZATION ---
    function init(){
        updHead();
        render();
        initSli();
        initCh();
        renderHist();
    }

    // --- HEADER LOGIC ---
    function updHead(){
        const m = d.toLocaleString('en-US',{month:'short'}).toUpperCase();
        document.getElementById('dateMain').innerText = `${d.getDate()} ${m}`;
        document.getElementById('dayMain').innerText = d.toLocaleString('en-US',{weekday:'long'}).toUpperCase();
    }

    function shift(n){
        d.setDate(d.getDate() + n);
        updHead();
        render();
    }

    // --- TASKS LOGIC ---
    function add(){
        const v = document.getElementById('inTask').value; 
        const c = document.querySelector('input[name="cat"]:checked').value;
        if(!v) return;
        
        tasks.push({
            id: Date.now(),
            t: v,
            q: c,
            done: false,
            date: d.toISOString().split('T')[0]
        });
        
        save();
        document.getElementById('inTask').value = '';
        render();
    }

    function tog(id){
        const t = tasks.find(x => x.id == id);
        if(t) t.done = !t.done;
        save();
        render();
    }

    function del(id){
        tasks = tasks.filter(x => x.id != id);
        save();
        render();
    }

    function save(){
        localStorage.setItem('zsh_tasks', JSON.stringify(tasks));
    }

    function render(){
        ['q1','q2','q3','q4'].forEach(q => document.getElementById('list-'+q).innerHTML = '');
        const dt = d.toISOString().split('T')[0];
        
        tasks.filter(t => t.date == dt).forEach(t => {
            const el = document.createElement('div'); 
            el.className = `task-row ${t.done?'done':''}`;
            el.innerHTML = `
                <div class="dot" onclick="tog(${t.id})"></div> 
                <span onclick="tog(${t.id})">${t.t}</span> 
                <button class="del-x" onclick="del(${t.id})">×</button>
            `;
            document.getElementById('list-'+t.q).appendChild(el);
        });

        ['q1','q2','q3','q4'].forEach(q => {
            const list = document.getElementById('list-'+q); 
            const block = document.getElementById('block-'+q);
            if(list.children.length === 0) block.style.display = 'none';
            else block.style.display = 'block';
        });
    }

    // --- WHEEL LOGIC ---
    function initSli(){
        const div = document.getElementById('sliders'); 
        if(div.innerHTML) return;
        cats.forEach((c,i) => {
            div.innerHTML += `
                <div class="slider-clean">
                    <span class="fashion-font">${c}</span> 
                    <input type="range" id="w${i}" min="1" max="10" value="5" oninput="updC()">
                </div>
            `;
        });
    }

    function initCh(){
        const ctx = document.getElementById('radarC').getContext('2d'); 
        Chart.defaults.font.family = 'Manrope';
        chart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: cats,
                datasets: [{
                    data: [5,5,5,5,5,5,5,5],
                    backgroundColor: 'rgba(17,17,17,0.05)',
                    borderColor: '#111',
                    borderWidth: 1,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: '#111',
                    pointRadius: 3
                }]
            },
            options: {
                scales: {
                    r: {
                        angleLines: {color:'#eee'},
                        grid: {color:'#eee'},
                        ticks: {display:false},
                        pointLabels: {font: {size:10, family:'Manrope'}, color: '#999'}
                    }
                },
                plugins: { legend: {display:false} }
            }
        });
    }

    function updC(){
        chart.data.datasets[0].data = cats.map((_,i) => document.getElementById('w'+i).value);
        chart.update();
    }

    function saveSnap(){
        hist.unshift({d: new Date().toLocaleDateString(), v: chart.data.datasets[0].data});
        localStorage.setItem('zsh_hist', JSON.stringify(hist));
        renderHist();
    }

    function renderHist(){
        const div = document.getElementById('hist'); 
        div.innerHTML = 'HISTORY:<br>';
        hist.forEach(h => {
            const avg = (h.v.reduce((a,b) => +a + +b, 0) / 8).toFixed(1);
            div.innerHTML += `<div style="margin-top:5px; border-bottom:1px solid #eee;">${h.d} — ${avg}</div>`;
        });
    }

    // --- NAVIGATION ---
    function nav(id, btn){
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-pill').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    init();
</script>
</body>
</html>
